FROM centos:centos7
ENV SHELL /bin/bash
RUN rm /bin/sh && ln -sf /bin/bash /bin/sh
RUN source ~/.bash_profile
RUN export GPG_TTY=$(tty)
RUN yum -y update
RUN yum -y install git curl
RUN yum -y install fuse fuse-libs
RUN yum -y install make gcc
#Installing openssl and helm
#This Tools are just required to maintain the Docker container running on Github Actions
#So that the test can be exercised and the results can be shown
#On a clean installation of CentOS 7, the AppImage will run normally, if this test is passed
COPY images/centos7_openssl  /root/
RUN chmod +x /root/centos7_openssl
RUN yes | /root/centos7_openssl 
#RUN curl -L https://git.io/get_helm.sh | bash

RUN mkdir /root/test
RUN mkdir /root/outputs
COPY AppImage/test  /root/test/
COPY DeSCAM_v  /root/
COPY images/centos7_script  /root/

WORKDIR /apps
ENTRYPOINT tail -f /dev/null
CMD [ "/bin/bash" ]
